<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html lang="en">
<!--<![endif]-->
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
    <!--[if IE]>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <![endif]-->
    <title>Support Admin</title>
    <!-- BOOTSTRAP CORE STYLE CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FONT AWESOME CSS -->
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" />
    <!-- CUSTOM STYLE CSS -->
    <link href="assets/css/style.css" rel="stylesheet" />
    <!-- Google	Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Nova+Flat' rel='stylesheet' type='text/css' />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,300' rel='stylesheet' type='text/css' />
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <div id="head">
        <div class="container">
            <div class="row">

                <div class="col-lg-4 col-md-4 col-sm-4">
                    <a href="index.html">
                        <h2><span>Remote Doorway</span></h2>
                    </a>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4 text-center" >
                    
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4">
                    <h4><span>Call:</span> +xx-xxxx-xxx-xxx</h4>
                    <h4><span>E-mail:</span> byteme@domain.com</h4>
                     <div class="col-lg-3 col-md-3 col-sm-3">
                    <a href="index.html" class=" label label-danger"><strong>LOGOUT / SIGNOUT</strong> </a>
                    </div>
                </div>
                
            </div>
        </div>
    </div>    <section>
        <div class="container">
            <div class="row noti-div">
                <div class="col-lg-3 col-md-3 col-sm-3  text-center">
                    <a href="admin-user-list.html">
                        <div class="alert alert-danger">
                            <i class="fa fa-user fa-4x"></i>
                            <span class="label label-info">New Users</span>
                            <span class="label label-danger"></span>
                            <p>
                                Create a new user

                            </p>
                        </div>
                    </a>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-3  text-center">
                    <a href="admin-open-tickets.html">
                        <div class="alert alert-success">
                            <i class="fa fa-folder-open-o fa-4x"></i>
                            <span class="label label-warning">View Users</span>
                            <span class="label label-success"></span>
                            <p>
                                View new users for application

                            </p>
                        </div>
                    </a>
                </div>


                <div class="col-lg-3 col-md-3 col-sm-3  text-center">
                    <a href="admin-support-cat.html">
                        <div class="alert alert-warning">
                            <i class="fa fa-briefcase fa-4x"></i>
                            <span class="label label-success">User Logs</span>
                            <span class="label label-warning"></span>
                            <p>
                               View Users Logs

                            </p>
                        </div>
                    </a>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-3 text-center">
                    <a href="admin-user-list.html">
                        <div class="alert alert-info">
                            <i class="fa fa-recycle fa-4x"></i>

                            <span class="label label-danger">Add Doors</span>
                            <span class="label label-info"></span>
                            <p>
                                Add doors to user's account
                            </p>
                        </div>
                    </a>
                </div>
            </div>


        </div>

    </section>
    <section id="main">
        <div class="container">
            <div class="row">
                <div class="col-lg-9 col-md-9 col-sm-9 alert alert-info">

                    <h3 class=" text-center">Compose New Notification</h3>
                   <div class="hr-div"> <hr /></div>
                    <form>


                       
                     
                     
                        <div class="form-group col-lg-12 col-md-12 col-sm-12">
                            <label>Please Enter Email</label>
                            <input type="text" id="email" class="form-control" required="" placeholder="Enter Name " />
                        </div>
                        <div class="form-group col-lg-12 col-md-12 col-sm-12">
                            <label>Please Enter Password</label>
                            <input type="password" id="password" class="form-control" required="" placeholder="Enter Address " />
                        </div>
                        <div class="form-group col-lg-12 col-md-12 col-sm-12">
                            <label>Please Enter Address</label>
                            <input type="text" id="address" class="form-control" required="" placeholder="Enter Address " />
                        </div>
                       <div class="form-group col-lg-12 col-md-12 col-sm-12">
                            <label>Please Enter Phone Number</label>
                            <input type="text" id="Phone" class="form-control" required="" placeholder="Enter Phone Number " />
                        </div>
                        <div class="form-group col-lg-12 col-md-12 col-sm-12">
                            <label>Please Enter name</label>
                            <input type="text" id="name" class="form-control" required="" placeholder="Enter Email " />
                        </div>
                      

                        <div class="form-group col-lg-12 col-md-12 col-sm-12">
                            <button type="button" onclick="savedata()" class="btn btn-primary"> Create User </button>
                        </div>
                    </form>

                </div>
                <div class="col-lg-3 col-md-3 col-sm-3">
                    <a href="index.html" class=" label label-danger"><strong>LOGOUT / SIGNOUT</strong> </a>
                    <div class="list-group">
                        <a href="#" class="list-group-item active">Quick Links
                        </a>

                        <a href="admin-dashboard.html" class="list-group-item">My Dashboard</a>
                        <a href="admin-user-list.html" class="list-group-item">New Users</a>
                        <a href="admin-open-tickets.html" class="list-group-item">View Users</a>
                        <a href="admin-support-cat.html" class="list-group-item">View Logs</a>
                        <a href="admin-user-list.html" class="list-group-item">View Doors</a>
                        <a href="admin-change-password.html" class="list-group-item">Change Password</a>


                    </div>
                    <div class="alert alert-danger text-center">
                        <h3>Import Information</h3>
                       Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                         Nulla pretium lectus vel justo iaculis blandit.  
                    </div>
                    
                </div>
            </div>
        </div>
    </section>
   <div id="footer">
        <div class="container">

            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4">
                    <h3>Physical Location</h3>
                    <p>
                        <i>Addresss :</i> 125/890 , Cenntenial college,
                        <br />
                        Toronto.
                         <br />
                       &copy; 2014 byteme | by <a href="" style="color:#fff;" target="_blank">bytme.com</a>
                   
                    </p>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4">
                    <h3>Get Quick Help</h3>
                    <h4><span>Call: </span>+01-xxxx-xxx-xxx</h4>
                    <h4><span>E-mail: </span>info@domain.com</h4>
                    <h4><span>Skype:</span> info</h4>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-4">

                    <h3>Subscribe For Updates</h3>
                    <form>

                        <div class="form-group">
                            <input type="text" class="form-control" required="required" placeholder="Your Email" />
                        </div>


                        <div class="form-group">
                            <button type="submit"id="sign-out" class="btn btn-danger">Click To Subscribe</button>
                        </div>
                    </form>
                </div>




            </div>

        </div>

    </div>
    <script src="https://www.gstatic.com/firebasejs/3.6.10/firebase.js"></script>
    <!--  Jquery Core Script -->
    <script src="assets/js/jquery-1.10.2.js"></script>
    <!--  Core Bootstrap Script -->
    <script src="assets/js/bootstrap.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDHHA-KaQmEvElBRwqaZpwjvGl3m8FSS8Y",
    authDomain: "locationdatabase-210d5.firebaseapp.com",
    databaseURL: "https://locationdatabase-210d5.firebaseio.com",
    storageBucket: "locationdatabase-210d5.appspot.com",
    messagingSenderId: "342545487415"
  };
  firebase.initializeApp(config);
</script> 
    <script>
    document.querySelector('#sign-out').addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      firebase.auth().signOut();
    });
    </script>







<script>

 function savedata()
 {
alert("savedata")
var ref = new Firebase("https://locationdatabase-210d5.firebaseio.com");
var email = document.getElementById('email').value;
var password = document.getElementById('password').value;

firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) 
{
          var errorCode = error.code;
         var errorMessage = error.message;
});

firebase.auth().onAuthStateChanged(function(user) {
  if (user) {
   uid = user.uid;
  // alert(uid);
   savedataTodb(uid)
  }
});




 }
</script>



    <script>
            
    var messagesRef = new Firebase('https://locationdatabase-210d5.firebaseio.com/RegisteredUsers');
    
    var oname = document.getElementById('name');
     var oaddress = document.getElementById('address');
      var oemail = document.getElementById('email');
       var ophone = document.getElementById('Phone');
   // var messageResults = document.getElementById('email');

    // Save data to firebase
    function savedataTodb(uid)
    {
       
        var newuid = uid;
        // alert(newuid);
var dbname = oname.value;
var dbphone = ophone.value;
var dbaddress = oaddress.value;
var dbemail = oemail.value;
      messagesRef.push({uid:newuid,name:dbname,phone:dbphone,address:dbaddress,email:dbemail});
      alert("data Inserted Successfully");  
      //call the data again
      messagesRef.limitToLast(1).on('child_added', function (snapshot) {
        var data = snapshot.val();
      //  console.log(snapshot.val());
        var id = snapshot.key();
        var email = snapshot.val().email;
        var mainid = uid;
        doordata(id,email,mainid)
       });
      alert("data Inserted Successfully");  


      firebase.auth().signOut();
      
    //  messageField.value = '';
    }

    function doordata(id,email,mainid)
    {
         var ref = new Firebase('https://locationdatabase-210d5.firebaseio.com');
        alert(email);
        var newuid = id;
          var newdbname= email;
          var mainid = mainid;
          var activation="false";
var date = "2 march 2017"
 var data = "true"
 var doorname="front door"
  var newPostKey = firebase.database().ref().child('door').push().key;
  var postdoordata={
        name: doorname,
        Cust_Id : mainid

  };

  //
 var postData = {

   data : data
  };

 var custdata={
    cust_id : mainid
 };
  // Get a key for a new Post.
 
 // var date = "2 march 2017"

  // Write the new post's data simultaneously in the posts list and the user's post list.
  var updates = {};
  updates['/RegisteredUsers/'+ newuid+ '/doors/' +newPostKey ] = postData;
  updates['/Doors/' + newPostKey + '/custIds/' + mainid  ] = postdoordata;
  //updates['/Doors/' + newPostKey + '/CustIds/' + mainid ] = custdata;

  return firebase.database().ref().update(updates);


}
        //  var customer_id
        //  newmessagesRef.push({CustId:newid,name:newdbname,status:status});
         // messagesRef.limitToLast(1).on('child_added', function (snapshot) {
       // var data = snapshot.val();
      //  console.log(snapshot.val());
      //  var id = snapshot.key();
      //  var email = snapshot.val().email;
      //    accesslist(id,email,mainid)
         //cust(newid)
         // });
    
    
  /*  function accesslist(id,email,mainid)
    {
        alert("access list called");
         var ref = new Firebase('https://locationdatabase-210d5.firebaseio.com/doors/list');
        alert(email);
        var newid = id;
          var newdbname = email;
          var status="close";
          var user2 ="not assigned"

        alert(mainid);

          var key= mainid;
    var newData={
        id: key,
        access_date: "222"
    }

    firebase.database().ref().push(newData);


        //  var customer_id
         // newmessagesRef.push({CustId:newid,User1:newdbname,User2:user2});
         //cust(newid)
    }*/
    </script>

    

    <!--  Jquery Core Script -->
    <script src="assets/js/jquery-1.10.2.js"></script>
    <!--  Core Bootstrap Script -->
    <script src="assets/js/bootstrap.js"></script>
    

</body>
</html>
